# e2e_depth_anything

ROS2 vision node running **depth_anything** (depth_anything_v2_vitb) on **cuda**.

Generated by [vision-factory](https://github.com/robocore/vision-factory).

## Quick Start

```bash
# Install Python dependencies
pip install -r requirements.txt

# Build with colcon
cd /path/to/ros_ws/src
cp -r e2e_depth_anything .
cd ..
colcon build --packages-select e2e_depth_anything
source install/setup.bash

# Run
ros2 launch e2e_depth_anything vision.launch.py
```

## Docker

```bash
docker build -t e2e_depth_anything .
docker run --gpus all --rm e2e_depth_anything
```

## Configuration

Edit `config/params.yaml`:

```yaml
e2e_depth_anything_node:
  ros__parameters:
    input_topic: "/camera/image_raw"
    publish_colored: true  # Publish colorized visualization
    publish_pointcloud: false  # Generate point cloud (needs camera_info)
    colormap: "turbo"  # Colormap for visualization
    min_depth: 0.0  # Clip minimum depth value
    max_depth: 1.0  # Clip maximum depth value
```

## Topics

### Subscribed
- `input_topic` (sensor_msgs/Image) — Input camera image

### Published
- `depth` (sensor_msgs/Image) — Raw depth map as float32
- `depth_colored` (sensor_msgs/Image) — Colorized depth visualization
- `pointcloud` (sensor_msgs/PointCloud2) — Point cloud (requires camera intrinsics)

## Fine-tuned Models

To use your own fine-tuned weights, update `config/params.yaml`:

```yaml
e2e_depth_anything_node:
  ros__parameters:
    # Point to your custom weights:
    # weights_path: "/path/to/my_finetuned_model.pt"
```

The architecture code is identical — only the weights change.
